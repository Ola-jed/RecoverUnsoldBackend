@page "/Offers/{OfferId:guid}"
@using System.Globalization
@using GoogleMapsComponents
@inherits OfferDetailsBase

<PageTitle>@StringLocalizer["OfferDetails"]</PageTitle>

@if (Loading) {
    <div style="display:flex; justify-content: center; align-items: center;">
        <MudProgressCircular Color="Color.Primary" Style="height:70px;width:70px;margin-top: 40vh;" Indeterminate="true"/>
    </div>
} else {
    @if (Offer == null) {
        <div style="display:flex; justify-content: center; align-items: center;">
            <MudText Typo="Typo.h5" Class="mud-text-secondary" Style="margin-top: 40vh;">
                @StringLocalizer["OfferNotFound"]
            </MudText>
        </div>
    } else {
        <div style="margin-top: 2rem; margin-left: 2rem; margin-bottom: 1rem">
            <MudText Typo="Typo.h5" Class="mud-text-secondary">
                @StringLocalizer["OfferDetails"]
            </MudText>
        </div>

        <MudGrid Class="m-2" Style="margin: 10px;width: 95%">
            <MudItem xs="3">
                <MudPaper Class="d-flex align-center justify-center mud-width-full py-6">
                    <MudIcon Icon="@Icons.Filled.Payments" Class="mr-2"/>
                    @StringLocalizer["TotalAmount"] : @Offer.Price.ToString(CultureInfo.CurrentCulture) XOF
                </MudPaper>
            </MudItem>

            <MudItem xs="3">
                <MudPaper Class="d-flex align-center justify-center mud-width-full py-6">
                    <MudIcon Icon="@Icons.Filled.Payments" Class="mr-2"/>
                    @StringLocalizer["Beneficiaries"] : @(Offer.Beneficiaries.ToString() ?? "N/A")
                </MudPaper>
            </MudItem>

            <MudItem xs="3">
                <MudPaper Class="d-flex align-center justify-center mud-width-full py-6">
                    <MudIcon Icon="@Icons.Filled.Event" Class="mr-2"/>
                    @StringLocalizer["StartDate"] : @Offer.StartDate.ToString(CultureInfo.CurrentCulture)
                </MudPaper>
            </MudItem>

            <MudItem xs="3">
                <MudPaper Class="d-flex align-center justify-center mud-width-full py-6">
                    <MudIcon Icon="@Icons.Filled.EventBusy" Class="mr-2"/>
                    @StringLocalizer["EndDate"] : @Offer.StartDate.AddSeconds(Offer.Duration).ToString(CultureInfo.CurrentCulture)
                </MudPaper>
            </MudItem>
        </MudGrid>

        <div style="margin-top: 2rem; margin-left: 2rem; margin-bottom: 1rem">
            <MudText Typo="Typo.h5">@StringLocalizer["Products"]</MudText>
        </div>

        // Table here

        <div style="margin-top: 2rem; margin-left: 2rem; margin-bottom: 1rem">
            <MudText Typo="Typo.h5">@StringLocalizer["Location"]</MudText>
        </div>

        <div style="margin: 3rem;height: 300px;">
            <GoogleMap @ref="@OfferMap" Id="OfferMap" Options="@MapOptions" Height="100%" OnAfterInit="InitMarker"/>
        </div>
    }
}